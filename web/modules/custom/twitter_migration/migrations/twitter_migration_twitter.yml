# Migration configuration for twitter_migration_twitter content.
id: twitter_migration_twitter
label: twitter
source:
  plugin: url
  data_fetcher_plugin: http
  data_parser_plugin: json
  urls: https://tweets.fra1.digitaloceanspaces.com/tweets-full.js
  item_selector: /
  fields:
    -
      name: tid_str
      selector: tweet/id_str
    -
      name: created_at
      selector: tweet/created_at
    -
      name: body
      selector: tweet/full_text
    -
      name: published_date
      selector: tweet/created_at
  ids:
    tid_str:
      type: string
      max_length: 256
  constants:
    TWEET_PREFIX: 'Tweet at '
destination:
  plugin: entity:node
process:
  type:
    plugin: default_value
    default_value: tweet
  title:
    plugin: concat
    source:
      - constants/TWEET_PREFIX
      - published_date
    delimiter: ' '
  uid:
    plugin: default_value
    default_value: 2
  sticky:
    plugin: default_value
    default_value: 0
  'body/value': body
  'body/format':
    plugin: default_value
    default_value: "full_html"
  # published_date like Wed Jun 22 15:54:22 +0000 2022
  created:
    plugin: format_date
    source: published_date
    from_format: 'D M d H:i:s O Y'
    to_format: 'U'
    from_timezone: 'UTC'
    to_timezone: 'UTC'